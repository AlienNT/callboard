{"version":3,"file":"js/128.583db77c.js","mappings":"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","sources":["webpack://callboard/./src/components/pages/VAnnouncementPage.vue","webpack://callboard/./src/components/VAnnouncementForm.vue","webpack://callboard/./src/components/VAnnouncementForm.vue?ba69","webpack://callboard/./src/components/pages/VAnnouncementPage.vue?3310"],"sourcesContent":["<template>\r\n<div class=\"row v-announcement-page\">\r\n  <VAnnouncementForm/>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport VAnnouncementForm from \"@/components/VAnnouncementForm.vue\";\r\nexport default {\r\n  name: \"VAnnouncementPage\",\r\n  components: {\r\n    VAnnouncementForm\r\n  }\r\n}\r\n</script>","<template>\r\n  <form\r\n      class=\"v-announcement-form\"\r\n      @submit.prevent.stop=\"onSubmit\"\r\n  >\r\n    <div class=\"title\">\r\n      Add new post\r\n    </div>\r\n    <div class=\"announcement-form__image-preview\">\r\n      <div class=\"image-wrapper\">\r\n        <VImage\r\n            :src=\"fileImage || uploadImage\"\r\n            background=\"rgb(46, 78, 105, 0.8)\"\r\n            alt=\"preview\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"announcement-form__fields\">\r\n      <label\r\n          class=\"announcement-form__label\"\r\n      >\r\n        <input\r\n            placeholder=\"title *\"\r\n            type=\"text\"\r\n            class=\"announcement-form__input\"\r\n            v-model=\"formData.title\"\r\n        >\r\n      </label>\r\n      <div class=\"image-loader\">\r\n        <label\r\n            class=\"announcement-form__label\"\r\n        >\r\n          <input\r\n              placeholder=\"image\"\r\n              type=\"text\"\r\n              class=\"announcement-form__input\"\r\n              :disabled=\"isFile\"\r\n              @blur=\"onBlur\"\r\n          >\r\n        </label>\r\n        <label\r\n            class=\"announcement-form__label\"\r\n        >\r\n          <input\r\n              placeholder=\"image\"\r\n              type=\"file\"\r\n              accept=\"image/png, image/jpeg\"\r\n              class=\"announcement-form__input\"\r\n              :disabled=\"isLink\"\r\n              @change=\"uploadFile\"\r\n          >\r\n        </label>\r\n      </div>\r\n      <label\r\n          class=\"announcement-form__label\"\r\n      >\r\n        <input\r\n            placeholder=\"price\"\r\n            type=\"number\"\r\n            class=\"announcement-form__input\"\r\n            v-model=\"formData.price\"\r\n        >\r\n      </label>\r\n      <label\r\n          class=\"announcement-form__label\"\r\n      >\r\n      <textarea\r\n          placeholder=\"description\"\r\n          class=\"announcement-form__input\"\r\n          v-model=\"formData.description\"\r\n      />\r\n      </label>\r\n      <button\r\n          class=\"submit\"\r\n          :disabled=\"!isValid\"\r\n      >\r\n        submit\r\n      </button>\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport VImage from \"@/components/VImage.vue\";\r\n\r\nexport default {\r\n  name: \"VAnnouncementForm\",\r\n  components: {\r\n    VImage\r\n  },\r\n  data() {\r\n    return {\r\n      formData: {\r\n        title: '',\r\n        description: '',\r\n        price: null\r\n      },\r\n      uploadImage: null,\r\n      fileImage: null\r\n    }\r\n  },\r\n  computed: {\r\n    isFile() {\r\n      return !!this.fileImage\r\n    },\r\n    isLink() {\r\n      return !!this.uploadImage\r\n    },\r\n    isValid () {\r\n      return !!this.formData.title?.trim()?.length\r\n    }\r\n  },\r\n  methods: {\r\n    getFormData() {\r\n      return {...this.formData, image: this.uploadImage || this.fileImage || null}\r\n    },\r\n    async onSubmit(e) {\r\n      if (this.isValid) {\r\n        const result = await this.createAnnouncement();\r\n        if (result._id) {\r\n          alert('create success')\r\n          this.clearFormData(e)\r\n        }\r\n      }\r\n    },\r\n    onBlur(e) {\r\n      this.uploadImage = e.target.value\r\n    },\r\n    clearFormData(e) {\r\n      e.target.reset()\r\n      this.formData = {\r\n        title: '',\r\n        description: '',\r\n        price: null\r\n      }\r\n      this.uploadImage = ''\r\n      this.fileImage = ''\r\n    },\r\n    async createAnnouncement() {\r\n      return await this.$store.dispatch('createAnnouncement', this.getFormData())\r\n    },\r\n    async fileToData(file) {\r\n      if (!file) return\r\n\r\n      return await new Promise(resolve => {\r\n        const reader = new FileReader();\r\n\r\n        reader.onloadend = () => resolve(reader.result)\r\n        reader.readAsDataURL(file);\r\n      })\r\n    },\r\n    async uploadFile(e) {\r\n      const image = await this.fileToData(e.target.files[0])\r\n      this.fileImage = image\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.title {\r\n  font-size: 20px;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  width: 100%;\r\n  margin-bottom: 15px;\r\n\r\n}\r\n.v-announcement-form {\r\n  margin: auto;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.announcement-form__image-preview {\r\n  width: 100%;\r\n\r\n  .image-wrapper {\r\n    border-radius: 5px;\r\n    overflow: hidden;\r\n  }\r\n}\r\n\r\n.announcement-form__image-preview,\r\n.announcement-form__fields {\r\n  padding: 10px;\r\n  flex: 1 1 50%;\r\n}\r\n.announcement-form__fields {\r\n  min-width: 240px;\r\n  > * {\r\n    margin-bottom: 10px;\r\n\r\n    &:last-child {\r\n      margin-bottom: 0;\r\n    }\r\n  }\r\n}\r\n\r\n.announcement-form__label {\r\n  width: 100%;\r\n  display: flex;\r\n\r\n  textarea {\r\n    height: 120px;\r\n  }\r\n}\r\n\r\n.image-loader {\r\n  display: flex;\r\n  gap: 10px;\r\n  justify-content: space-between;\r\n}\r\n\r\n.announcement-form__input {\r\n  border-radius: 5px;\r\n  padding: 5px 10px;\r\n  background: #fff;\r\n\r\n}\r\n\r\n</style>","import { render } from \"./VAnnouncementForm.vue?vue&type=template&id=717ea993&scoped=true\"\nimport script from \"./VAnnouncementForm.vue?vue&type=script&lang=js\"\nexport * from \"./VAnnouncementForm.vue?vue&type=script&lang=js\"\n\nimport \"./VAnnouncementForm.vue?vue&type=style&index=0&id=717ea993&scoped=true&lang=scss\"\n\nimport exportComponent from \"D:\\\\IT\\\\Web\\\\Other\\\\callboard\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-717ea993\"]])\n\nexport default __exports__","import { render } from \"./VAnnouncementPage.vue?vue&type=template&id=6efe1654\"\nimport script from \"./VAnnouncementPage.vue?vue&type=script&lang=js\"\nexport * from \"./VAnnouncementPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\IT\\\\Web\\\\Other\\\\callboard\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_VAnnouncementForm","_createElementVNode","onSubmit","_cache","_withModifiers","args","$options","_hoisted_2","_hoisted_3","_component_VImage","src","$data","fileImage","uploadImage","background","alt","_hoisted_4","_hoisted_5","placeholder","type","formData","title","$event","_hoisted_6","_hoisted_7","disabled","isFile","onBlur","_hoisted_9","accept","isLink","onChange","uploadFile","_hoisted_11","price","_hoisted_12","description","isValid","_hoisted_13","name","components","VImage","data","computed","this","trim","length","methods","getFormData","image","async","e","result","createAnnouncement","_id","alert","clearFormData","target","value","reset","$store","dispatch","file","Promise","resolve","reader","FileReader","onloadend","readAsDataURL","fileToData","files","__exports__","VAnnouncementForm","render"],"sourceRoot":""}